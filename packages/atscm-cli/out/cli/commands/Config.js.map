{"version":3,"sources":["../../../src/cli/commands/Config.js"],"names":["ConfigCommand","constructor","name","description","maxArguments","run","cli","process","env","ATSCM_CONFIG_PATH","environment","configPath","config","require","modulePath","ProjectConfig","default","styles","number","string","info","format","path","colors","depth","breakLength","options","project","warn","command"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;;;AAEA;;;AAGe,MAAMA,aAAN,2BAAoC;;AAEjD;;;;;AAKAC,cAAYC,IAAZ,EAAkBC,WAAlB,EAA+B;AAC7B,UAAMD,IAAN,EAAYC,WAAZ,EAAyB;AACvBC,oBAAc;AADS,KAAzB;AAGD;;AAED;;;;AAIAC,MAAIC,GAAJ,EAAS;AACPC,YAAQC,GAAR,CAAYC,iBAAZ,GAAgCH,IAAII,WAAJ,CAAgBC,UAAhD;;AAEA;AACA,UAAMC,SAASC,QAAQP,IAAII,WAAJ,CAAgBI,UAAxB,EAAoCC,aAApC,IACbF,QAAQP,IAAII,WAAJ,CAAgBC,UAAxB,EAAoCK,OADtC,CAJO,CAKwC;;AAE/C,kBAAQC,MAAR,CAAeC,MAAf,GAAwB,SAAxB;AACA,kBAAQD,MAAR,CAAeE,MAAf,GAAwB,MAAxB;;AAEA,qBAAOC,IAAP,CACE,kBADF,EACsB,iBAAOC,MAAP,CAAcC,IAAd,CAAmBhB,IAAII,WAAJ,CAAgBC,UAAnC,CADtB,EAEG,KAAI,mBAAQC,MAAR,EAAgB,EAAEW,QAAQ,IAAV,EAAgBC,OAAO,IAAvB,EAA6BC,aAAa,CAA1C,EAAhB,CAA+D,EAFtE;;AAKA,QAAInB,IAAIoB,OAAJ,CAAYC,OAAZ,IAAuBf,OAAOV,IAAP,KAAgB,eAA3C,EAA4D;AAC1D,uBAAO0B,IAAP,CAAY,gEAAZ;AACA,uBAAOR,IAAP,CAAY,KAAZ,EAAmB,iBAAOC,MAAP,CAAcQ,OAAd,CAAsB,cAAtB,CAAnB,EAA0D,iCAA1D;AACD;AACF;;AApCgD;kBAA9B7B,a","file":"Config.js","sourcesContent":["import { inspect } from 'util';\nimport Logger from '../../lib/util/Logger';\nimport Command from '../../lib/cli/Command';\n\n/**\n * The command invoked when running \"config\".\n */\nexport default class ConfigCommand extends Command {\n\n  /**\n   * Creates a new {@link ConfigCommand} with the specified name and description.\n   * @param {String} name The command's name.\n   * @param {String} description The command's description.\n   */\n  constructor(name, description) {\n    super(name, description, {\n      maxArguments: 0,\n    });\n  }\n\n  /**\n   * Prints the project's configuration.\n   * @param {AtSCMCli} cli The current Cli instance.\n   */\n  run(cli) {\n    process.env.ATSCM_CONFIG_PATH = cli.environment.configPath;\n\n    // eslint-disable-next-line global-require\n    const config = require(cli.environment.modulePath).ProjectConfig ||\n      require(cli.environment.configPath).default; // eslint-disable-line global-require\n\n    inspect.styles.number = 'magenta';\n    inspect.styles.string = 'cyan';\n\n    Logger.info(\n      'Configuration at', Logger.format.path(cli.environment.configPath),\n      `\\n${inspect(config, { colors: true, depth: null, breakLength: 0 })}`\n    );\n\n    if (cli.options.project && config.name !== 'ProjectConfig') {\n      Logger.warn('Overriding runtime configuration requires atscm version >= 0.4');\n      Logger.info('Run', Logger.format.command('atscm update'), 'to update to the newest version');\n    }\n  }\n\n}\n"]}