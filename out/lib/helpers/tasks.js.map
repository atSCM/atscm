{"version":3,"sources":["../../../src/lib/helpers/tasks.js"],"names":["handleTaskError","error","additionalMessage","node","nodeId","Object","assign","message","stack","finishTask","Session","closeOpen"],"mappings":";;;;;;;;AAAA;;;;AAEA;;;;;AAKO,SAASA,eAAT,CAAyBC,KAAzB,EAAgC;AACrC,QAAMC,iBAAiB,GAAGD,KAAK,CAACE,IAAN,GAAc;WAC/BF,KAAK,CAACE,IAAN,CAAWC,MAAO,EADD,GACK,EAD/B;AAGAC,EAAAA,MAAM,CAACC,MAAP,CAAcL,KAAd,EAAqB;AACnBM,IAAAA,OAAO,EAAG,GAAEN,KAAK,CAACM,OAAQ,GAAEL,iBAAkB,EAD3B;AAEnBM,IAAAA,KAAK,EAAG,GAAEP,KAAK,CAACO,KAAM,GAAEN,iBAAkB;AAFvB,GAArB;AAKA,QAAMD,KAAN;AACD;AAED;;;;;;AAIO,SAASQ,UAAT,GAAsB;AAC3B,SAAOC,iBAAQC,SAAR,EAAP;AACD","sourcesContent":["import Session from '../server/Session';\n\n/**\n * Adds additional infomation to the error's message and rethows it.\n * @param {Error} error The error that occured.\n * @throws {Error} The extended error.\n */\nexport function handleTaskError(error) {\n  const additionalMessage = error.node ? `\n - Node: ${error.node.nodeId}` : '';\n\n  Object.assign(error, {\n    message: `${error.message}${additionalMessage}`,\n    stack: `${error.stack}${additionalMessage}`,\n  });\n\n  throw error;\n}\n\n/**\n * Closes open sessions once a task is complete.\n * @return {Promise<void>} Resolved once cleanup is complete.\n */\nexport function finishTask() {\n  return Session.closeOpen();\n}\n"],"file":"tasks.js"}